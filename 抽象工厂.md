![E8F3004F-43E8-4BC7-9642-EE3A2F5B2251.png](http://ww1.sinaimg.cn/large/9e58a4edly1gfp7tvdwf0j20de098gm6.jpg)

同产品等级是同一类产品，同产品族的产品是由一个工厂生成的。

抽象工厂模式是工厂模式（简单工厂、工厂方法）中最具抽象和一般性的一种形态。抽象工厂模式可以向客户端提供一个接口， 使客户端在不必指定产品的具体的情况下，创建多个产品族中的产品对象。

抽象工厂模式的定义：为创建一组相关或相互依赖的对象提供一个接口，且无须指定它们的具体类。

![AF1094CA-210B-4858-BE16-FC8CEC04F0FC.png](http://ww1.sinaimg.cn/large/9e58a4edly1gfp8iqwhhpj20if0hkwga.jpg)

步骤

抽象工厂的抽象类图与角色
抽象工厂一般包含四种角色，分别是:

- 抽象工厂(Abstract Factory)：提供了创建产品的接口，包含多个创建产品的方法，即包含多个类似 new Product 的方法。
- 具体工厂(Concrete Factory)：实现抽象工厂定义的接口，完成某个具体产品的创建。
抽象产品(Abstract Product)：抽象产品定义，一般有多少抽象产品，抽象工厂中就包含多少个创建产品的方法。
- 具体产品. (Concrete Product)：抽象产品的实现类。
实现抽象产品所定义的接口，和具体工厂是多对一的关系:



![337296E0-3AC6-4A96-885B-CB1FA3CDBCE0.png](http://ww1.sinaimg.cn/large/9e58a4edly1gfp8kb415ej20y70jsgqi.jpg)



我们来看一下简单工厂和抽象工厂的一些区别，优缺点，以及他的应用场景：

抽象工厂新增一种产品类时，只需要增加相应的具体产品类和相应的工厂子类即可。

简单工厂模式需要修改工厂类的判断逻辑。

抽象工厂每个具体工厂类只负责创建对应的产品。

简单工厂中的工厂类存在复杂的 switch 逻辑判断。

抽象工厂不使用静态工厂方法，可以形成基于继承的等级结构。

简单工厂模式的工厂类使用静态工厂方法。

缺点：

抽象工厂模式很难支持新种类产品的变化。

这是因为抽象工厂接口中已经确定了可以被创建的产品集合，如果需要添加新产品，此时就必须去修改抽象工厂的接口，这样就涉及到抽象工厂类的以及所有子类的改变。比如，刚刚我们新建一个海尔工厂，让他也生产电视和空调是很简单的。但是如果让你新增洗衣机这一个新的产品等级，我们要做的修改就很多了。

在了解其缺点后，我们来看一下抽象工厂的应用场景：

当需要创建的对象是一系列相互关联或相互依赖的产品族时，便可以使用抽象工厂模式。说的更明白一点，就是一个继承体系中，如果存在着多个等级结构（即存在着多个抽象类），并且分属各个等级结构中的实现类之间存在着一定的关联或者约束，就可以使用抽象工厂模式。假如各个等级结构中的实现类之间不存在关联或约束，则使用多个独立的工厂来对产品进行创建，则更合适一点。

